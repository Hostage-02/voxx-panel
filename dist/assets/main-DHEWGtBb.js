import{bs as B,bt as f,bu as v,bv as p,bw as M,bx as x,by as C,bz as G,bA as a,bB as R,bC as W,bD as N,bE as g,bF as H,bG as J,bH as S,bI as F,bJ as L,bK as T,bL as V,bM as _,bN as j}from"./vendor-Ct6abLVH.js";import{i as A}from"./echarts-kXh951Ve.js";import{s as E}from"./systeminfo-Br964dgD.js";import"os";import"fs";import"path";import"child_process";import"util";import"https";import"http";import"net";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=s(n);fetch(n.href,c)}})();const b=B.createInstance({name:"nas-navigation",storeName:"config",version:1}),U=1;async function $(){let r=await b.getItem("config");return r?r.version<U&&(r=z(r)):(r={version:U,groups:[]},await b.setItem("config",r)),r}function z(r){return{version:U,groups:r.groups||[]}}const D={async getGroups(){return(await $()).groups},async addGroup(r){const o=await $(),s={...r,id:crypto.randomUUID(),createdAt:Date.now(),updatedAt:Date.now()};return o.groups.push(s),await b.setItem("config",o),s},async exportConfig(){const r=await $();return JSON.stringify(r,null,2)},async importConfig(r){if(!r||typeof r!="string")throw new Error("配置必须是非空字符串");const o=r.replace(/[^\x20-\x7E]/g,"");let s;try{s=JSON.parse(o)}catch{throw new Error("无效的JSON格式")}if(!s||typeof s!="object")throw new Error("配置必须是有效对象");if(!s.version||typeof s.version!="number")throw new Error("缺少版本号或版本号格式错误");if(!Array.isArray(s.groups))throw new Error("分组数据必须是数组");for(const i of s.groups){if(!i.id||typeof i.id!="string")throw new Error("分组ID必须是非空字符串");if(!Array.isArray(i.items))throw new Error("分组条目必须是数组");for(const n of i.items){if(!n.id||typeof n.id!="string")throw new Error("条目ID必须是非空字符串");if(typeof n.internalUrl!="string"||typeof n.externalUrl!="string")throw new Error("URL必须是字符串")}}await b.setItem("config",s)},async getCurrentUrl(r,o){return o?r.internalUrl:r.externalUrl},async openNewWindow(r,o){const s=await this.getCurrentUrl(r,o);window.open(s,"_blank")},async saveGroups(r){const o=await $();o.groups=r,await b.setItem("config",o)}},w=(r,o)=>{const s=r.__vccOpts||r;for(const[i,n]of o)s[i]=n;return s},q=["onClick"],K=["onClick","onContextmenu"],X=["src"],Y={__name:"SmartNav",setup(r){const o=f([]);(async()=>{o.value=await D.getGroups()})();const i=f(window.location.hostname.includes(".local")),n=f({show:!1,x:0,y:0,item:null}),c=(l,h)=>{l.preventDefault(),n.value={show:!0,x:l.clientX,y:l.clientY,item:h}},u=()=>{n.value.show=!1},t=f({}),e=l=>{t.value[l]=!t.value[l]};return(l,h)=>(p(),v("div",{class:"smart-nav",onClick:u},[(p(!0),v(x,null,C(o.value,d=>(p(),R(N(H),{key:d.id,modelValue:d.items,"onUpdate:modelValue":m=>d.items=m,group:"navItems","item-key":"id",onEnd:h[0]||(h[0]=()=>N(D).saveGroups(o.value))},{header:W(()=>[a("div",{class:"group-header",onClick:m=>e(d.id)},[a("span",null,g(d.name),1),a("span",null,g(t.value[d.id]?"▲":"▼"),1)],8,q)]),default:W(()=>[t.value[d.id]?(p(!0),v(x,{key:0},C(d.items,m=>(p(),v("div",{key:m.id,class:"nav-item",onClick:y=>N(D).openNewWindow(m,i.value),onContextmenu:y=>c(y,m)},[m.icon?(p(),v("img",{key:0,src:m.icon,class:"icon"},null,8,X)):M("",!0),a("span",null,g(m.name),1)],40,K))),128)):M("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128)),n.value.show?(p(),v("div",{key:0,class:"context-menu",style:G({left:n.value.x+"px",top:n.value.y+"px"})},[a("div",{onClick:h[1]||(h[1]=d=>l.openNewWindow(n.value.item))},"新窗口打开"),a("div",{onClick:h[2]||(h[2]=d=>l.editItem(n.value.item))},"编辑"),a("div",{onClick:h[3]||(h[3]=d=>l.deleteItem(n.value.item))},"删除")],4)):M("",!0)]))}},Q=w(Y,[["__scopeId","data-v-6d4208b2"]]),Z={class:"network-adapter"},tt={class:"status-bar"},et={class:"service-list"},nt=["href"],ot=["src"],at={__name:"NetworkAdapter",setup(r){const o=f(window.location.hostname.includes(".local")),s=f([{name:"Jellyfin",internal:"http://nas.local:8096",external:"https://demo.com",icon:"/icons/jellyfin.svg"}]),i=c=>o.value?c.internal:c.external,n=()=>{o.value=!o.value};return(c,u)=>(p(),v("div",Z,[a("div",tt,[a("span",null,"当前环境: "+g(o.value?"内网":"外网"),1),a("button",{onClick:n},"切换")]),a("div",et,[(p(!0),v(x,null,C(s.value,t=>(p(),v("a",{key:t.name,href:i(t),class:"service-item"},[t.icon?(p(),v("img",{key:0,src:t.icon,class:"icon"},null,8,ot)):M("",!0),a("span",null,g(t.name),1)],8,nt))),128))])]))}},st=w(at,[["__scopeId","data-v-994bd91e"]]),rt={class:"docker-monitor"},lt=["onClick"],it=["onClick"],ct={__name:"DockerMonitor",setup(r){const o=J.create({socketPath:"/var/run/docker.sock",baseURL:"http://localhost/v1.41"}),s=f([]),i=f({}),n=async()=>{const t=await o.get("/containers/json?all=true");s.value=t.data},c=async t=>{await o.post(`/containers/${t}/start`),n()},u=async t=>{await o.post(`/containers/${t}/stop`),n()};return S(()=>{n(),setInterval(n,5e3)}),(t,e)=>(p(),v("div",rt,[e[1]||(e[1]=a("h2",null,"Docker容器监控",-1)),a("table",null,[e[0]||(e[0]=a("thead",null,[a("tr",null,[a("th",null,"容器ID"),a("th",null,"名称"),a("th",null,"状态"),a("th",null,"CPU使用率"),a("th",null,"内存使用率"),a("th",null,"操作")])],-1)),a("tbody",null,[(p(!0),v(x,null,C(s.value,l=>{var h,d;return p(),v("tr",{key:l.Id},[a("td",null,g(l.Id.slice(0,12)),1),a("td",null,g(l.Names[0].replace("/","")),1),a("td",null,g(l.State),1),a("td",null,g(((h=i.value[l.Id])==null?void 0:h.cpu)||"-")+"%",1),a("td",null,g(((d=i.value[l.Id])==null?void 0:d.memory)||"-")+"%",1),a("td",null,[l.State==="running"?(p(),v("button",{key:0,onClick:m=>u(l.Id)},"停止",8,lt)):(p(),v("button",{key:1,onClick:m=>c(l.Id)},"启动",8,it))])])}),128))])])]))}},ut=w(ct,[["__scopeId","data-v-2f18e07f"]]),dt={class:"hardware-monitor"},pt={__name:"HardwareMonitor",setup(r){let o=null,s=null,i=null;const n=f([]),c=f(0),u=f({rx:0,tx:0}),t=()=>{o=A(document.getElementById("cpu-chart")),o.setOption({title:{text:"CPU负载"},tooltip:{},xAxis:{type:"category",data:[]},yAxis:{max:100},series:[{type:"line",data:[],smooth:!0,areaStyle:{}}]}),s=A(document.getElementById("mem-chart")),s.setOption({title:{text:"内存使用"},series:[{type:"pie",radius:["50%","70%"],label:{show:!1},data:[{value:0,name:"已用"},{value:100,name:"可用"}]}]}),i=A(document.getElementById("net-chart")),i.setOption({title:{text:"网络吞吐量"},tooltip:{},xAxis:{type:"category",data:["接收","发送"]},yAxis:{},series:[{type:"bar",data:[0,0]}]})};let e=null;const l=async()=>{const d=await E.currentLoad();n.value.push(d.currentLoad.toFixed(2)),n.value.length>10&&n.value.shift();const m=await E.mem();c.value=(m.used/m.total*100).toFixed(2);const y=await E.networkStats();u.value={rx:(y[0].rx_bytes/1024/1024).toFixed(2),tx:(y[0].tx_bytes/1024/1024).toFixed(2)},h()},h=()=>{o.setOption({xAxis:{data:Array.from({length:n.value.length},(d,m)=>m+1)},series:[{data:n.value}]}),s.setOption({series:[{data:[{value:c.value,name:"已用"},{value:100-c.value,name:"可用"}]}]}),i.setOption({series:[{data:[u.value.rx,u.value.tx]}]})};return S(()=>{t(),l(),e=setInterval(l,2e3)}),F(()=>{clearInterval(e),o.dispose(),s.dispose(),i.dispose()}),(d,m)=>(p(),v("div",dt,m[0]||(m[0]=[a("h2",null,"硬件状态监控",-1),a("div",{class:"chart-container"},[a("div",{id:"cpu-chart",class:"chart"}),a("div",{id:"mem-chart",class:"chart"}),a("div",{id:"net-chart",class:"chart"})],-1)])))}},mt=w(pt,[["__scopeId","data-v-fc5b4181"]]),vt={class:"clock-container"},ht={key:0},ft={key:1,class:"digital-clock"},gt={class:"time"},yt={class:"date"},_t={__name:"ClockComponent",setup(r){const o=f("analog"),s=f(null);let i=null;const n=()=>{const u=s.value,t=u.getContext("2d"),e=u.width/2,l=new Date;t.clearRect(0,0,u.width,u.height),t.beginPath(),t.arc(e,e,e*.9,0,2*Math.PI),t.strokeStyle="#333",t.lineWidth=e*.05,t.stroke();for(let k=0;k<60;k++){const I=k*6*Math.PI/180,O=k%5===0?e*.1:e*.05;t.beginPath(),t.moveTo(e+e*.85*Math.sin(I),e-e*.85*Math.cos(I)),t.lineTo(e+(e*.85-O)*Math.sin(I),e-(e*.85-O)*Math.cos(I)),t.strokeStyle="#333",t.lineWidth=k%5===0?3:1,t.stroke()}const h=l.getHours()%12,d=l.getMinutes(),m=(h*30+d*.5)*Math.PI/180;t.beginPath(),t.moveTo(e,e),t.lineTo(e+e*.5*Math.sin(m),e-e*.5*Math.cos(m)),t.strokeStyle="#333",t.lineWidth=e*.05,t.stroke();const y=d*6*Math.PI/180;t.beginPath(),t.moveTo(e,e),t.lineTo(e+e*.7*Math.sin(y),e-e*.7*Math.cos(y)),t.strokeStyle="#333",t.lineWidth=e*.03,t.stroke();const P=l.getSeconds()*6*Math.PI/180;t.beginPath(),t.moveTo(e,e),t.lineTo(e+e*.8*Math.sin(P),e-e*.8*Math.cos(P)),t.strokeStyle="#f44336",t.lineWidth=e*.01,t.stroke(),t.beginPath(),t.arc(e,e,e*.05,0,2*Math.PI),t.fillStyle="#f44336",t.fill(),i=requestAnimationFrame(n)},c=()=>{const u=new Date;return{time:u.toLocaleTimeString(),date:u.toLocaleDateString(),day:["日","一","二","三","四","五","六"][u.getDay()]}};return S(()=>{if(o.value==="analog"){const u=s.value;u.width=300,u.height=300,n()}}),F(()=>{i&&cancelAnimationFrame(i)}),(u,t)=>(p(),v("div",vt,[o.value==="analog"?(p(),v("div",ht,[a("canvas",{ref_key:"canvasRef",ref:s},null,512)])):(p(),v("div",ft,[a("div",gt,g(c().time),1),a("div",yt,"星期"+g(c().day)+" "+g(c().date),1)])),a("button",{onClick:t[0]||(t[0]=e=>o.value=o.value==="analog"?"digital":"analog")}," 切换"+g(o.value==="analog"?"数字":"模拟")+"时钟 ",1)]))}},wt=w(_t,[["__scopeId","data-v-c65c45a7"]]),kt={class:"wallpaper-switcher"},bt={class:"controls"},xt=["onClick"],Ct={__name:"WallpaperSwitcher",setup(r){const o=f([]),s=f(""),i=f(!1),n=f(!0),c=async()=>{o.value=["/wallpapers/1.jpg","/wallpapers/2.jpg","/wallpapers/3.jpg"],o.value.length>0&&(s.value=o.value[0])},u=e=>{n.value?(s.value="",setTimeout(()=>{s.value=o.value[e]},500)):s.value=o.value[e]},t=()=>{const e=Math.floor(Math.random()*o.value.length);u(e)};return S(()=>{c()}),(e,l)=>(p(),v("div",kt,[a("div",{class:"wallpaper-container",style:G({backgroundImage:`url(${s.value})`,transition:n.value?"background-image 0.5s ease":"none",filter:i.value?"blur(5px)":"none"})},null,4),a("div",bt,[(p(!0),v(x,null,C(o.value,(h,d)=>(p(),v("button",{key:d,onClick:m=>u(d)}," 壁纸 "+g(d+1),9,xt))),128)),a("button",{onClick:t},"随机切换"),a("label",null,[L(a("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=h=>i.value=h)},null,512),[[V,i.value]]),l[2]||(l[2]=T(" 模糊效果 "))]),a("label",null,[L(a("input",{type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=h=>n.value=h)},null,512),[[V,n.value]]),l[3]||(l[3]=T(" 过渡动画 "))])])]))}},It=w(Ct,[["__scopeId","data-v-f9845a1b"]]),$t={class:"app"},Mt={__name:"App",setup(r){return(o,s)=>(p(),v("div",$t,[_(It),a("header",null,[s[0]||(s[0]=a("h1",null,"NAS智能导航系统",-1)),_(wt)]),a("main",null,[_(Q),_(st),_(ut),_(mt)])]))}},St=j(Mt);St.mount("#app");
